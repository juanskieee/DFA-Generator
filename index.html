<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DFA Problem Solver</title>

  <!-- Inter font for modern typography -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
        </div>
        <div>
          <h1 class="app-title">DFA Problem Solver</h1>
          <p class="subtitle">Rule-based generator and simulator with clean visuals</p>
        </div>
      </div>
    </header>

    <!-- Main Grid -->
    <main class="main-grid">
      <!-- Builder Panel -->
      <section class="panel panel-emphasis">
        <div class="panel-title-row">
          <h2 class="panel-title">Design DFA</h2>
          <span class="badge badge-primary">Builder</span>
        </div>

        <div class="inline-hint">
          <p>Use presets and controls to express common DFA problems without memorizing construction rules.</p>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="problemType">Problem type</label>
            <select id="problemType" class="input">
              <optgroup label="Pattern matching">
                <option value="ends-with">Ends with pattern</option>
                <option value="all-one-symbol-or-another">Strings of only A or only B</option>
                <option value="starts-with">Starts with pattern</option>
                <option value="contains">Contains substring</option>
                <option value="exactly-pattern">Exactly pattern</option>
                <option value="not-contains">Does NOT contain substring</option>
                <option value="start-end-pattern">Starts & Ends with patterns</option>
                <option value="end-with-or-even-after">Ends with A or Even Bs after last A</option>
                <option value="symbol-followed-by-pattern">Each A followed by pattern</option>
                <option value="only-one-symbol">Strings consisting only of a chosen A</option>
                <option value="each-surrounded">Each A surrounded by B</option>
              </optgroup>

              <optgroup label="Symbol counting">
                <option value="even-count">Even count of A</option>
                <option value="odd-count">Odd count of A</option>
                <option value="at-least">At least N occurrences of A</option>
                <option value="exact-count">Exactly N occurrences of A</option>
                <option value="exact-n-a-at-least-m-b">Exactly N of A and At Least M of B</option>
                <option value="equal-count-patterns">Equal count of patterns</option>
              </optgroup>

              <optgroup label="Special patterns">
                <option value="same-start-end">Same start & end character</option>
                <option value="alternating">Alternating characters</option>
                <option value="no-consecutive">No consecutive A</option>
                <option value="divisible-by">Divisible by</option>
                <option value="length-at-most">Length at most N</option>
                <option value="start-parity-length">Start A odd length or Start B even length</option>
                <option value="start-10-or-end-0-odd">Starts with 10 or Ends with 0 and Odd length</option>
              </optgroup>

              <optgroup label="Position rules">
                <option value="odd-positions-symbol">Odd positions are symbol</option>
                <option value="even-positions-symbol">Even positions are symbol</option>
              </optgroup>
            </select>
          </div>

          <div id="patternGroup" class="form-group">
            <label for="pattern">Pattern</label>
            <input type="text" id="pattern" class="input" placeholder="e.g., 01 or 110" value="01" />
          </div>

          <div id="symbolGroup" class="form-group" style="display:none;">
            <label for="symbol">Symbol</label>
            <input type="text" id="symbol" class="input" placeholder="e.g., 0" maxlength="1" />
          </div>

          <div id="onlyOneSymbolGroup" class="form-group" style="display:none;">
            <label for="onlyOneSymbol">Symbol</label>
            <input type="text" id="onlyOneSymbol" class="input" placeholder="e.g., 0 or 1" maxlength="1" value="0" />
          </div>

          <div id="positionsSymbolGroup" class="form-group" style="display:none;">
            <label for="positionsSymbol">Symbol</label>
            <input type="text" id="positionsSymbol" class="input" placeholder="e.g., 1" maxlength="1" value="1" />
          </div>

          <div id="onlySymbolsGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="onlySymbolA">Symbol A</label>
              <input type="text" id="onlySymbolA" class="input" placeholder="e.g., 0" maxlength="1" value="0" />
            </div>
            <div class="form-group">
              <label for="onlySymbolB">Symbol B</label>
              <input type="text" id="onlySymbolB" class="input" placeholder="e.g., 1" maxlength="1" value="1" />
            </div>
          </div>

          <div id="atLeastGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="atLeastSymbol">Symbol</label>
              <input type="text" id="atLeastSymbol" class="input" placeholder="e.g., 1" maxlength="1" />
            </div>
            <div class="form-group">
              <label for="atLeastCount">Minimum count</label>
              <input type="number" id="atLeastCount" class="input" placeholder="e.g., 2" min="1" value="2" />
            </div>
          </div>

          <div id="exactCountGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="exactSymbol">Symbol</label>
              <input type="text" id="exactSymbol" class="input" placeholder="e.g., 0" maxlength="1" />
            </div>
            <div class="form-group">
              <label for="exactCount">Exact count</label>
              <input type="number" id="exactCount" class="input" placeholder="e.g., 3" min="0" value="3" />
            </div>
          </div>

          <div id="equalPatternsGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="pattern1">Pattern 1</label>
              <input type="text" id="pattern1" class="input" placeholder="e.g., 01" />
            </div>
            <div class="form-group">
              <label for="pattern2">Pattern 2</label>
              <input type="text" id="pattern2" class="input" placeholder="e.g., 10" />
            </div>
          </div>

          <div id="startEndGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="startPattern">Start pattern</label>
              <input type="text" id="startPattern" class="input" placeholder="e.g., 11" />
            </div>
            <div class="form-group">
              <label for="endPattern">End pattern</label>
              <input type="text" id="endPattern" class="input" placeholder="e.g., 01" />
            </div>
          </div>

          <div id="endWithOrEvenAfterGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="endSymbol">Symbol 1 (end symbol)</label>
              <input type="text" id="endSymbol" class="input" placeholder="e.g., 1" maxlength="1" />
            </div>
            <div class="form-group">
              <label for="countSymbol">Symbol 2 (count symbol)</label>
              <input type="text" id="countSymbol" class="input" placeholder="e.g., 0" maxlength="1" />
            </div>
          </div>

          <div id="symbolFollowedByPatternGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="followedSymbol">Symbol</label>
              <input type="text" id="followedSymbol" class="input" placeholder="e.g., 0" maxlength="1" />
            </div>
            <div class="form-group">
              <label for="followingPattern">Following pattern</label>
              <input type="text" id="followingPattern" class="input" placeholder="e.g., 11" />
            </div>
          </div>

          <div id="exactNAAtLeastMBGroup" class="form-quad" style="display:none;">
            <div class="form-group">
              <label for="symbolA">Symbol A</label>
              <input type="text" id="symbolA" class="input" placeholder="e.g., 0" maxlength="1" value="0" />
            </div>
            <div class="form-group">
              <label for="exactN">Exact count of A</label>
              <input type="number" id="exactN" class="input" placeholder="e.g., 4" min="0" value="4" />
            </div>
            <div class="form-group">
              <label for="symbolB">Symbol B</label>
              <input type="text" id="symbolB" class="input" placeholder="e.g., 1" maxlength="1" value="1" />
            </div>
            <div class="form-group">
              <label for="atLeastM">Minimum count of B</label>
              <input type="number" id="atLeastM" class="input" placeholder="e.g., 2" min="0" value="2" />
            </div>
          </div>

          <div id="eachSurroundedGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="surroundedSymbol">Surrounded symbol</label>
              <input type="text" id="surroundedSymbol" class="input" placeholder="e.g., 0" maxlength="1" value="0" />
            </div>
            <div class="form-group">
              <label for="surroundingSymbol">Surrounding symbol</label>
              <input type="text" id="surroundingSymbol" class="input" placeholder="e.g., 1" maxlength="1" value="1" />
            </div>
          </div>

          <div id="startParityLengthGroup" class="form-pair" style="display:none;">
            <div class="form-group">
              <label for="startOddSymbol">Start symbol for odd length</label>
              <input type="text" id="startOddSymbol" class="input" placeholder="e.g., 0" maxlength="1" value="0" />
            </div>
            <div class="form-group">
              <label for="startEvenSymbol">Start symbol for even length</label>
              <input type="text" id="startEvenSymbol" class="input" placeholder="e.g., 1" maxlength="1" value="1" />
            </div>
          </div>

          <div id="divisibleByGroup" class="form-group" style="display:none;">
            <label for="divisibleBy">Divisible by</label>
            <input type="number" id="divisibleBy" class="input" placeholder="e.g., 3" min="2" value="3" />
          </div>

          <div id="lengthAtMostGroup" class="form-group" style="display:none;">
            <label for="lengthAtMost">Maximum length</label>
            <input type="number" id="lengthAtMost" class="input" placeholder="e.g., 5" min="1" value="5" />
          </div>

          <div class="form-group">
            <label for="alphabet">Alphabet (no spaces)</label>
            <input type="text" id="alphabet" class="input" placeholder="e.g., 01 or abc" value="01" />
          </div>
        </div>

        <div class="button-row">
          <button id="generateBtn" class="btn btn-primary">
            <span class="btn-icon">
              <svg class="icon-small" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </span>
            <span class="btn-label">Generate DFA</span>
          </button>
          <button id="clearBtn" class="btn btn-outline">
            <span class="btn-icon">
              <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </span>
            <span class="btn-label">Clear</span>
          </button>
        </div>

        <div id="builderHint" class="helper-hint">
          <p>Tip: Set alphabet first to align pattern and symbol options.</p>
        </div>
      </section>

      <!-- Simulator Panel -->
      <section class="panel">
        <div class="panel-title-row">
          <h2 class="panel-title">Test string</h2>
          <span class="badge badge-success">Simulator</span>
        </div>

        <div class="form-group">
          <label for="testString">Input string</label>
          <input type="text" id="testString" class="input" placeholder="Enter string to test" disabled />
        </div>

        <div class="button-row">
          <button id="testBtn" class="btn btn-success" disabled>
            <span class="btn-icon">
              <svg class="icon-small" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </span>
            <span class="btn-label">Test string</span>
          </button>
        </div>

        <div id="result" class="result" style="display:none;"></div>
        
        <div class="empty-placeholder">
          <h3>No DFA generated yet</h3>
          <p>Configure rules on the left and click <strong>Generate DFA</strong> to unlock testing.</p>
        </div>
      </section>
    </main>

    <!-- Visualization -->
    <section id="dfaVisualization" class="panel" style="display:none;">
      <div class="panel-title-row">
        <h2 class="panel-title">Generated DFA</h2>
        <span class="badge">Visualization</span>
      </div>

      <div id="dfaDescription" class="description"></div>

      <h3 class="section-title">State diagram</h3>
      <div class="diagram-container">
        <canvas id="stateDiagram" width="900" height="600" aria-label="DFA state diagram"></canvas>
      </div>

      <div class="legend">
        <p><span class="legend-title">Legend:</span></p>
        <ul class="legend-list">
          <li>Blue circles = Regular states</li>
          <li>Green double circles = Accept states</li>
          <li>Arrow from "start" = Initial state</li>
          <li>Edge labels = Input symbols</li>
        </ul>
      </div>

      <h3 class="section-title">Transition table</h3>
      <div class="table-container">
        <table id="transitionTable" aria-label="Transition table"></table>
      </div>
      <div class="table-legend">
        <p>→ = Start state | ★ = Accept state</p>
      </div>

      <div class="stats-grid">
        <div class="stat-card stat-blue">
          <p class="stat-label">Q - Internal states</p>
          <p class="stat-value" id="statesList"></p>
        </div>
        <div class="stat-card stat-teal">
          <p class="stat-label">F - Final states</p>
          <p class="stat-value" id="acceptStatesList"></p>
        </div>
      </div>
    </section>

  <footer class="footer">
      <div class="footer-content">
        <div class="footer-left">
          <p class="copyright">© 2025 DFA Problem Solver.</p>
          <p class="creator">Juan Carlos Garcia</p>
        </div>
        <div class="footer-right">
          <div class="profile-pic">
            <img src="1x1 JUAN.jpg" alt="Profile Picture" class="profile-img">
          </div>

          <a href="https://github.com/juanskieee" target="_blank" rel="noopener noreferrer" class="social-link github" aria-label="GitHub">
            <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405 1.02 0 2.04.135 3 .405 2.28-1.56 3.285-1.245 3.285-1.245.675 1.65.255 2.88.135 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.285 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
            </svg>
          </a>

          <a href="https://www.facebook.com/juanskiee" target="_blank" rel="noopener noreferrer" class="social-link facebook" aria-label="Facebook">
            <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4v-8.5z"/>
            </svg>
          </a>

          <a href="https://www.instagram.com/juanskiie/" target="_blank" rel="noopener noreferrer" class="social-link instagram" aria-label="Instagram">
             <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
             </svg>
          </a>
        </div>
      </div>
    </footer>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
